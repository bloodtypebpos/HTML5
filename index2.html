<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Assembly Tutorial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    :root{
      --header-h: 8vh;    /* ~8% tall header */
      --footer-h: 8vh;    /* ~8% tall footer */
      --left-w:   33vw;   /* ~33% width text panel */
      --pad: 16px;
      --bg: #ffffff;
      --ink: #111111;
      --brand: #0b6efd;   /* tweak if you want a different accent */
      --btn-bg: #f2f2f2;
      --btn-ink:#111;
      --btn-radius: 14px;
    }

    html, body {
      margin: 0; padding: 0; height: 100%; background: var(--bg); color: var(--ink);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    /* Grid: header | main (left+right) | footer */
    .wrap {
      display: grid;
      grid-template-rows: var(--header-h) 1fr var(--footer-h);
      grid-template-columns: 33% 67%;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
    }

    header {
      grid-column: 1 / 3;
      display: flex; align-items: center; justify-content: center;
      padding: 0 var(--pad); border-bottom: 1px solid #e5e5e5; 
      font-weight: 700; font-size: clamp(18px, 3.2vh, 28px); letter-spacing: .02em;
      background: #fff;
    }

    main {
      display: contents; /* so children become grid cells */
    }

    .left {
      grid-row: 2; grid-column: 1;
      padding: calc(var(--pad) * 1.0);
      overflow: auto;
      border-right: 1px solid #eee;
    }

    .left h2 {
      margin: 0 0 8px 0;
      font-size: clamp(16px, 2.6vh, 22px);
    }

    .left p, .left li {
      line-height: 1.35;
      font-size: clamp(14px, 2.2vh, 18px);
    }

    .right {
      grid-row: 2; grid-column: 2;
      position: relative; overflow: hidden;
      background: #fff;
    }

    model-viewer {
      width: 100%; height: 100%;
      background-color: #fff; /* white canvas */
    }

    footer {
      grid-column: 1 / 3;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 12px;
      padding: 0 var(--pad);
      border-top: 1px solid #e5e5e5;
      background: #fff;
    }

    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      min-height: calc(var(--footer-h) * 0.66);
      padding: 10px 18px; border-radius: var(--btn-radius);
      background: var(--btn-bg); color: var(--btn-ink);
      border: 1px solid #ddd; font-weight: 600;
      font-size: clamp(14px, 2.4vh, 18px);
      text-decoration: none; user-select: none; touch-action: manipulation;
    }
    .btn:active { transform: translateY(1px); }
    .btn.primary { background: var(--brand); color: #fff; border-color: transparent; }

    .page-indicator {
      font-weight: 700; opacity: 0.8;
      font-size: clamp(14px, 2.4vh, 18px);
    }

    /* Improve tap targets on tablets */
    @media (hover: none) and (pointer: coarse) {
      .btn { padding: 12px 20px; }
    }

    /* Optional: if device is extremely short in height */
    @media (max-height: 540px) {
      :root{ --header-h: 9vh; --footer-h: 9vh; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <header id="title">EM153 | Inner Column Prep</header>

    <!-- Main - Left (Text) -->
    <main>
      <section class="left" id="leftPane">
        <h2>Overview</h2>
        <p>
          This tutorial walks through the assembly process step-by-step.
          Use the <strong>Previous</strong> and <strong>Next</strong> buttons below to navigate pages.
        </p>

        <h2>Tools & Materials</h2>
        <ul>
          <li>Hex keys (metric)</li>
          <li>Torque wrench</li>
          <li>Threadlocker (medium)</li>
          <li>Assembly hardware kit</li>
        </ul>

        <h2>Notes</h2>
        <p>
          Pinch to zoom and drag to rotate the 3D model on the right. Double-tap to focus.
          Animations (if present) can be started with the Play button we’ll add on later pages.
        </p>
      </section>

      <!-- Main - Right (Viewer) -->
      <section class="right">
        <model-viewer id="mv"
          src="1-inner_prep.glb"
          camera-controls
          bounds="tight"
          shadow-intensity="0.6"
          exposure="1.0"
          ar
          ar-modes="webxr scene-viewer quick-look">
        </model-viewer>
					  <!-- UI overlay in the right viewer pane -->
		<div id="animUi" style="position:absolute; bottom:12px; left:12px; display:flex; gap:8px; background:#fffccf; border:1px solid #e0d68a; padding:8px 10px; border-radius:10px; font:14px system-ui;">
		  <select id="animSel" title="Animation"></select>
		  <button id="playBtn">Play</button>
		  <button id="pauseBtn">Pause</button>
		</div>

		<script type="module">
		  const mv = document.getElementById('mv');
		  const sel = document.getElementById('animSel');
		  const playBtn = document.getElementById('playBtn');
		  const pauseBtn = document.getElementById('pauseBtn');

		  mv.addEventListener('load', () => {
			// Populate list of animations
			sel.innerHTML = '';
			const clips = mv.availableAnimations || [];
			if (clips.length) {
			  clips.forEach(name => {
				const opt = document.createElement('option');
				opt.value = opt.textContent = name;
				sel.appendChild(opt);
			  });
			  mv.animationName = sel.value = clips[0]; // select first
			  mv.play(); // start it
			}
		  });

		  sel.addEventListener('change', () => { mv.animationName = sel.value; mv.play(); });
		  playBtn.addEventListener('click', () => mv.play());
		  pauseBtn.addEventListener('click', () => mv.pause());
		</script>
		
		<script type="module">
		  const mv = document.getElementById('mv');
		  mv.addEventListener('load', () => {
			mv.pause();                 // stop animation after loading
			mv.currentTime = 0;         // rewind to start position
		  });
		</script>
		
				<!-- Background color selector -->
		<div id="bgUi" style="position:absolute; bottom:12px; right:12px; background:#ffffffcc; border:1px solid #ccc; padding:8px 12px; border-radius:10px; font:14px system-ui;">
		  <label for="bgSelect">Background:</label>
		  <select id="bgSelect">
			<option value="#ffffff">White</option>
			<option value="#888888">Grey</option>
			<option value="#000000">Black</option>
		  </select>
		</div>

		
      </section>
    </main>
	

    <!-- Footer -->
    <footer>
      <div>
        <button class="btn" id="prevBtn" title="Previous Page">⟵ Previous</button>
      </div>
      <div class="page-indicator" id="pageIndicator">Page 1 of 8</div>
      <div style="text-align:right;">
        <button class="btn primary" id="nextBtn" title="Next Page">Next ⟶</button>
      </div>
    </footer>
  </div>

  <script>
    // Simple page state (adjust to your real values)
    let currentPage = 1;
    const totalPages = 8;

    const pageIndicator = document.getElementById('pageIndicator');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function updatePageIndicator() {
      pageIndicator.textContent = `Page ${currentPage} of ${totalPages}`;
      prevBtn.disabled = currentPage <= 1;
      nextBtn.disabled = currentPage >= totalPages;
    }
    updatePageIndicator();

    // Navigation hooks — replace with your real routing (e.g., window.location = 'page-2.html')
    prevBtn.addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        updatePageIndicator();
        // TODO: load previous page/glb/content here
        // e.g., window.location.href = `page-${currentPage}.html`;
      }
    });

    nextBtn.addEventListener('click', () => {
      if (currentPage < totalPages) {
        currentPage++;
        updatePageIndicator();
        // TODO: load next page/glb/content here
        // e.g., window.location.href = `page-${currentPage}.html`;
      }
    });

    // If you want to dynamically change the title:
    // document.getElementById('title').textContent = 'ERGO FORCE – MAIN ASSEMBLY';
  </script>
  
  <script>
  const mv = document.getElementById('mv');
  const bgSelect = document.getElementById('bgSelect');

  bgSelect.addEventListener('change', () => {
    mv.style.backgroundColor = bgSelect.value;
  });
  </script>

  
</body>
</html>
